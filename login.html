<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Login - Quiz Platform</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="login-box">
            <h1>Welcome to Quiz Platform</h1>
            <p>Please sign in to continue</p>
            
            <div id="loadingIndicator" style="display: none; text-align: center; margin: 20px 0;">
                <div class="spinner"></div>
                <p style="color: #1e3c72; margin-top: 10px;">Signing in... Please wait</p>
            </div>
            
            <div id="userInfo" style="display: none;">
                <img id="userPhoto" src="" alt="User Photo">
                <h3 id="userName"></h3>
                <p id="userEmail"></p>
            </div>

            <button id="googleSignIn" class="btn-google">
                <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google">
                Sign in with Google
            </button>
            
            <div class="divider">
                <span>OR</span>
            </div>
            
            <button id="emergencyLoginBtn" class="btn-emergency">
                ‚ö†Ô∏è Emergency Login
            </button>
            <p style="text-align: center; color: #666; font-size: 0.85em; margin-top: 10px;">
                Use Emergency Login if Google Sign-In fails
            </p>
            
            <!-- Emergency Login Modal -->
            <div id="emergencyModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <span class="close-modal" id="closeEmergency">&times;</span>
                    <h2>üîí Emergency Login</h2>
                    <p>Enter the emergency password</p>
                    <input type="password" id="emergencyPassword" placeholder="Enter password" autocomplete="off">
                    <button id="emergencySubmit" class="btn-primary">Login</button>
                    <p class="error-message" id="emergencyError" style="display: none; color: red; margin-top: 10px;"></p>
                </div>
            </div>
            
            <!-- Registration Modal (for mobile) -->
            <div id="registrationModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>‚úèÔ∏è Complete Registration</h2>
                    <p>Please enter your name to continue</p>
                    <div id="regUserInfo" style="margin: 20px 0; text-align: center;">
                        <img id="regUserPhoto" src="" alt="User" style="width: 80px; height: 80px; border-radius: 50%; margin: 0 auto; display: block;">
                        <p id="regUserEmail" style="color: #666; margin-top: 10px;"></p>
                    </div>
                    <input type="text" id="regDisplayName" placeholder="Enter your full name" style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; margin-bottom: 15px;">
                    <button id="completeRegBtn" class="btn-primary" style="width: 100%;">Complete Registration</button>
                </div>
            </div>

            <div id="nameSection" style="display: none;">
                <input type="text" id="displayName" placeholder="Enter your name" required>
                <button id="proceedBtn" class="btn-primary">Proceed to Quiz Selection</button>
            </div>
        </div>
    </div>

    <script src="security.js"></script>
    <script type="module" src="auth.js"></script>
</body>
</html>
